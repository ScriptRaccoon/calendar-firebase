{"version":3,"sources":["auth.js"],"names":["checkUser","user","emailVerified","window","location","href","changeForm","$","fadeToggle","handleLogin","e","preventDefault","email","val","password","firebase","auth","signInWithEmailAndPassword","then","userCredential","text","sendEmailVerification","catch","error","message","handleRegister","createUserWithEmailAndPassword","prop","onAuthStateChanged","on"],"mappings":"AAOA,SAAAA,EAAAC,GACAA,GAAAA,EAAAC,gBACAC,OAAAC,SAAAC,KAAA,mBAIA,SAAAC,IACAC,EAAA,cAAAC,WAAA,QACAD,EAAA,iBAAAC,WAAA,QAGA,SAAAC,EAAAC,GACAA,EAAAC,iBACA,IAAAC,EAAAL,EAAA,oBAAAM,MACAC,EAAAP,EAAA,uBAAAM,MACAE,SACAC,OACAC,2BAAAL,EAAAE,GACAI,KAAA,IACA,MAAAjB,EAAAkB,EAAAlB,KACAA,GAAAA,EAAAC,cACAC,OAAAC,SAAAC,KAAA,mBAEAE,EAAA,yBAAAa,KACA,0EAEAnB,EAAAoB,2BAGAC,MAAA,IACAf,EAAA,yBAAAa,KAAAG,EAAAC,WAIA,SAAAC,EAAAf,GACAA,EAAAC,iBACA,IAAAC,EAAAL,EAAA,uBAAAM,MACAC,EAAAP,EAAA,0BAAAM,MACAE,SACAC,OACAU,+BAAAd,EAAAE,GACAI,KAAA,IACA,MAAAjB,EAAAkB,EAAAlB,KACAA,EAAAoB,wBACAd,EACA,+GAGAoB,KAAA,YAAA,GACApB,EAAA,4BAAAa,KAAA,IACAb,EAAA,0BAAAa,KACA,gIAGAE,MAAA,IACAf,EAAA,4BAAAa,KAAAG,EAAAC,WA9DAjB,EAAA,KACAQ,SAAAC,OAAAY,mBAAA5B,GACAO,EAAA,cAAAsB,GAAA,QAAAvB,GACAC,EAAA,cAAAsB,GAAA,SAAApB,GACAF,EAAA,iBAAAsB,GAAA,SAAAJ","file":"auth.js","sourcesContent":["$(() => {\r\n    firebase.auth().onAuthStateChanged(checkUser);\r\n    $(\".changeBtn\").on(\"click\", changeForm);\r\n    $(\"#loginForm\").on(\"submit\", handleLogin);\r\n    $(\"#registerForm\").on(\"submit\", handleRegister);\r\n});\r\n\r\nfunction checkUser(user) {\r\n    if (user && user.emailVerified) {\r\n        window.location.href = `./calendar.html`;\r\n    }\r\n}\r\n\r\nfunction changeForm() {\r\n    $(\"#loginForm\").fadeToggle(\"slow\");\r\n    $(\"#registerForm\").fadeToggle(\"slow\");\r\n}\r\n\r\nfunction handleLogin(e) {\r\n    e.preventDefault();\r\n    const email = $(\"#loginEmailInput\").val();\r\n    const password = $(\"#loginPasswordInput\").val();\r\n    firebase\r\n        .auth()\r\n        .signInWithEmailAndPassword(email, password)\r\n        .then((userCredential) => {\r\n            const user = userCredential.user;\r\n            if (user && user.emailVerified) {\r\n                window.location.href = `./calendar.html`;\r\n            } else {\r\n                $(\"#loginForm .authError\").text(\r\n                    \"You need to verify your e-mail address first. Please check your inbox.\"\r\n                );\r\n                user.sendEmailVerification();\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            $(\"#loginForm .authError\").text(error.message);\r\n        });\r\n}\r\n\r\nfunction handleRegister(e) {\r\n    e.preventDefault();\r\n    const email = $(\"#registerEmailInput\").val();\r\n    const password = $(\"#registerPasswordInput\").val();\r\n    firebase\r\n        .auth()\r\n        .createUserWithEmailAndPassword(email, password)\r\n        .then((userCredential) => {\r\n            const user = userCredential.user;\r\n            user.sendEmailVerification();\r\n            $(\r\n                \"#registerForm input[type='password'], \" +\r\n                    \"#registerForm input[type='email'], \" +\r\n                    \"#registerForm input[type='submit']\"\r\n            ).prop(\"disabled\", true);\r\n            $(\"#registerForm .authError\").text(\"\");\r\n            $(\"#registerForm .success\").text(\r\n                \"Registration was successful! Please check your inbox to verify your e-mail address. After this verification you can login.\"\r\n            );\r\n        })\r\n        .catch((error) => {\r\n            $(\"#registerForm .authError\").text(error.message);\r\n        });\r\n}\r\n"]}